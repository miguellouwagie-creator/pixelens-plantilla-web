---
import Layout from "../layouts/Layout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";
import Testimonials from "../components/Testimonials.astro";
import Button from "../components/ui/Button.astro"; // <--- Importamos tu UI
import { client } from "../lib/sanity";
import { urlFor } from "../lib/urlFor";

// Pedimos los ajustes globales
const datos = await client.fetch(`*[_type == "ajustes"][0]{
  nombreRestaurante,
  tituloHero,
  descripcionHero,
  imagenHero 
}`);

const bgImage = datos?.imagenHero
  ? urlFor(datos.imagenHero).width(1920).format("webp").quality(80).url()
  : "https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?auto=format&fit=crop&w=1920&q=80";
---

<Layout title={`Inicio | ${datos?.nombreRestaurante || "Restaurante"}`}>
  <Navbar />

  <div
    class="relative bg-dark text-white py-40 px-6 bg-cover bg-center bg-no-repeat"
    style={`background-image: url('${bgImage}');`}
  >
    <div class="absolute inset-0 bg-black/50"></div>

    <div class="relative container mx-auto text-center z-10">
      <h1
        class="text-5xl md:text-7xl font-bold mb-6 leading-tight font-serif tracking-wide"
      >
        {datos?.tituloHero || "Experiencia Gastron√≥mica"}
      </h1>

      <p
        class="text-xl md:text-2xl text-white/90 max-w-2xl mx-auto mb-12 font-light"
      >
        {datos?.descripcionHero || "Cocina de autor en un entorno inolvidable."}
      </p>

      <div class="flex flex-col md:flex-row justify-center gap-6">
        <Button href="/carta" variant="primary"> Ver Carta </Button>

        <Button href="/contacto" variant="outline">
          Solicitar Consultor√≠a
        </Button>
      </div>
    </div>
  </div>

  <main class="container mx-auto px-6 py-24">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
      <div
        class="p-8 border border-border-light rounded-xl hover:shadow-lg transition duration-300"
      >
        <div class="text-5xl mb-6 text-brand">ü•ò</div>
        <h3 class="text-2xl font-bold mb-3 font-serif text-dark">
          Cocina Tradicional
        </h3>
        <p class="text-text-secondary leading-relaxed">
          Recetas heredadas cocinadas a fuego lento con el mejor producto local.
        </p>
      </div>
      <div
        class="p-8 border border-border-light rounded-xl hover:shadow-lg transition duration-300"
      >
        <div class="text-5xl mb-6 text-brand">üåä</div>
        <h3 class="text-2xl font-bold mb-3 font-serif text-dark">
          Vistas al Mar
        </h3>
        <p class="text-text-secondary leading-relaxed">
          Disfruta de la brisa del Mediterr√°neo desde nuestra terraza exclusiva.
        </p>
      </div>
      <div
        class="p-8 border border-border-light rounded-xl hover:shadow-lg transition duration-300"
      >
        <div class="text-5xl mb-6 text-brand">üç∑</div>
        <h3 class="text-2xl font-bold mb-3 font-serif text-dark">
          Bodega Selecta
        </h3>
        <p class="text-text-secondary leading-relaxed">
          M√°s de 100 referencias para maridar perfectamente con cada plato.
        </p>
      </div>
    </div>
  </main>

  <Testimonials />
  <Footer />
</Layout>
